{"version":3,"sources":["../../src/pages/map/map.module.ts","../../src/components/components.module.ts","../../src/components/custom-navbar/custom-navbar.ts","../../src/components/nav-account/nav-account.ts","../../src/components/map/map.ts","../../src/providers/providers.ts","../../src/pages/map/map.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAyC;AACa;AACN;AAEhB;AACsC;AAetE,IAAa,aAAa;IAA1B;IAA6B,CAAC;IAAD,oBAAC;AAAD,CAAC;AAAjB,aAAa;IAbzB,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,qDAAO;SACR;QACD,OAAO,EAAE;YACP,uFAAgB;YAChB,sEAAe,CAAC,QAAQ,CAAC,qDAAO,CAAC;YACjC,4EAAe,CAAC,QAAQ,EAAE;SAC3B;QACD,OAAO,EAAE;YACP,qDAAO;SACR;KACF,CAAC;GACW,aAAa,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;ACpBe;AACG;AAC0B;AACN;AACvB;AAiBzC,IAAa,gBAAgB;IAA7B;IAA+B,CAAC;IAAD,uBAAC;AAAD,CAAC;AAAnB,gBAAgB;IAf5B,uEAAQ,CAAC;QACT,YAAY,EAAE;YACb,2FAAqB;YACnB,qFAAmB;YACnB,8DAAY;SACd;QACD,OAAO,EAAE;YACR,kEAAW;SACX;QACD,OAAO,EAAE;YACR,2FAAqB;YACnB,qFAAmB;YACnB,8DAAY;SACd;KACD,CAAC;GACW,gBAAgB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;ACrBoB;AACD;AACO;AACvD,uDAAuD;AAEvD;;;;;GAKG;AAKH,IAAa,qBAAqB;IAUhC,+BAAmB,SAA0B;QAA1B,cAAS,GAAT,SAAS,CAAiB;QALrC,4BAAuB,GAAW,CAAC,CAAC;QACpC,4BAAuB,GAAW,CAAC,CAAC;QACpC,gBAAW,GAAW,CAAC,CAAC;QACxB,yBAAoB,GAAW,CAAC,CAAC;IAGzC,CAAC;IAED,yCAAS,GAAT;QACE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,wEAAU,CAAC,CAAC,OAAO,EAAE,CAAC;IAC9C,CAAC;IAGH,4BAAC;AAAD,CAAC;AAhBU;IAAR,oEAAK,EAAE;;mDAAc;AACb;IAAR,oEAAK,EAAE;;mDAAc;AAHX,qBAAqB;IAJjC,wEAAS,CAAC;QACT,QAAQ,EAAE,eAAe;OACQ;KAClC,CAAC;0BAW6C;AAQ9C;SAlBY,qBAAqB,W;;;;;;;;;;;;;;;;;;;ACfe;AAEjD;;;;;GAKG;AAKH,IAAa,mBAAmB;IAK9B;QAHA,WAAM,GAAW,GAAG,CAAC;IAIrB,CAAC;IAEM,4CAAc,GAArB;QACE,oDAAoD;IACtD,CAAC;IAEM,yDAA2B,GAAlC;QACE,gDAAgD;IAClD,CAAC;IAEH,0BAAC;AAAD,CAAC;AAhBY,mBAAmB;IAJ/B,wEAAS,CAAC;QACT,QAAQ,EAAE,aAAa;OACQ;KAChC,CAAC;;AAiBD;SAhBY,mBAAmB,W;;;;;;;;;;;;;;;;;;;;;;;ACZgD;AACvC;AACe;AAElB;AAC2B;AAcjE,IAAa,YAAY;IAcvB,sBACO,IAAY,EACZ,QAAkB,EACjB,WAAwB,EACxB,YAAkC;QAJ1C,iBASC;QARM,SAAI,GAAJ,IAAI,CAAQ;QACZ,aAAQ,GAAR,QAAQ,CAAU;QACjB,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAsB;QAT1C,MAAM;QACE,SAAI,GAAW,EAAE,CAAC;QAClB,YAAO,GAAW,EAAE,CAAC;QAS3B,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;YACzB,YAAI,CAAC,IAAI,CAAC,GAAG,CAAC,cAAI,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,CAAC;QAA1C,CAA0C,CAC3C,CAAC;IACJ,CAAC;IAEO,uCAAgB,GAAxB;QAAA,iBAQC;QAPC,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC;QACtC,IAAI,CAAC,YAAY,CAAC,oBAAoB,EAAE,CAAC,SAAS,CAChD,UAAC,OAAO;YACN,KAAI,CAAC,OAAO,EAAE,CAAC;YACf,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;QACvB,CAAC,CACF;IACH,CAAC;IAEO,8BAAO,GAAf;QAAA,iBAcA;QAZC,IAAI,CAAC,WAAW,CAAC,kBAAkB,CACjC,EAAC,kBAAkB,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAC,CAC5D;aACA,IAAI,CAAC,UAAC,QAAQ;YACX,KAAI,CAAC,aAAa,CAChB,KAAI,CAAC,YAAY,GAAG,IAAI,uDAAM,CAC5B,QAAQ,CAAC,MAAM,CAAC,QAAQ,EACxB,QAAQ,CAAC,MAAM,CAAC,SAAS,CAC5B,CAAC,CAAC;QACL,CAAC,EACD,UAAC,KAAK,IAAK,YAAI,CAAC,YAAY,CAAC,KAAK,CAAC,EAAxB,CAAwB,CACpC;IACH,CAAC;IAEO,mCAAY,GAApB,UAAqB,KAAK;QACvB,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;IACjC,CAAC;IAEO,oCAAa,GAArB,UAAsB,MAAc;QAApC,iBAgCC;QA/BC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACZ,IAAI,MAAM,GAAG,KAAI,CAAC,UAAU,CAAC,aAAa,CAAC;YAC3C,KAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE;gBACrC,IAAI,EAAE,KAAI,CAAC,IAAI;gBACf,OAAO,EAAE,KAAI,CAAC,OAAO;gBACrB,MAAM,EAAE,MAAM;gBACd,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;gBACxC,sBAAsB,EAAE,KAAK;gBAC7B,gBAAgB,EAAE,IAAI;gBACtB,WAAW,EAAE,KAAK;gBAClB,SAAS,EAAE,IAAI;gBACf,WAAW,EAAE,IAAI;gBACjB,YAAY,EAAE,KAAK;gBACnB,iBAAiB,EAAE,KAAK;aACzB,CAAC,CAAC;YAEH,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAI,CAAC,GAAG,EAAE,MAAM,EAAE;gBAClD,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACjC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;gBAE9C,KAAI,CAAC,oBAAoB,EAAE,CAAC;gBAC5B,KAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,KAAI,CAAC,WAAW,EAAE,CAAC;YACrB,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,KAAI,CAAC,GAAG,EAAE,gBAAgB,EAAE;gBACxD,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC;oBACZ,KAAI,CAAC,SAAS,EAAE,CAAC;gBACnB,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,2CAAoB,GAA5B;QAAA,iBAiBC;QAhBC,IAAI,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACjD,SAAS,CAAC,EAAE,GAAG,WAAW,CAAC;QAC3B,SAAS,CAAC,YAAY,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;QACzC,SAAS,CAAC,YAAY,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;QACxC,SAAS,CAAC,YAAY,CAAC,OAAO,EAAC,mDAAmD,CAAC,CAAC;QACpF,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAElC,IAAI,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QACrD,WAAW,CAAC,YAAY,CAAC,OAAO,EAAC,4BAA4B,CAAC,CAAC;QAC/D,SAAS,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QAEnC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC7E,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE;YAClC,YAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAI,CAAC,YAAY,CAAC;QAAjC,CAAiC,CAClC,CAAC;IACJ,CAAC;IAEM,gCAAS,GAAhB;QAAA,iBAIC;QAHC,UAAU,CAAC;YACT,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;QAChD,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAEO,kCAAW,GAAnB;QAAA,iBAMC;QALC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAI;YACvB,IAAI,CAAC,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC5C,CAAC,CAAC;IAGJ,CAAC;IAEO,oCAAa,GAArB;QACE,EAAE,EAAC,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC;YACnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,gCAA+B,CAAC,CAAC;YACnF,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAEO,gCAAS,GAAjB,UAAkB,QAAgB,EAAE,IAAa;QAC/C,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YAC5B,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,QAAQ,EAAE,QAAQ;SAEnB,CAAC,CAAC;IACL,CAAC;IAmCH,mBAAC;AAAD,CAAC;AAzKC;IADC,0EAAS,CAAC,KAAK,CAAC;8BACG,iEAAU;gDAAC;AACtB;IAAR,oEAAK,EAAE;;6CAA0C;AAJvC,YAAY;IAJxB,wEAAS,CAAC;QACT,QAAQ,EAAE,KAAK;OACQ;KACxB,CAAC;wEAgBmB;QACF,8EAAQ;QACJ,kFAAW;QACV,SAAoB;AA0J3C;SA5KY,YAAY,U;;;;;;;;;;ACnB4C;AAInE;;;;;;;;;;;;;;;;;;;;;;ACJwC;AACI;AAER;AAOtC,IAAa,OAAO;IAOlB,iBAAmB,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;QANzC,YAAO,GAAU;YACf,EAAC,MAAM,EAAE,IAAI,uDAAM,CAAC,SAAS,EAAC,UAAU,CAAC,EAAC;YAC1C,EAAC,MAAM,EAAE,IAAI,uDAAM,CAAC,SAAS,EAAC,UAAU,CAAC,EAAC;YAC1C,EAAC,MAAM,EAAE,IAAI,uDAAM,CAAC,SAAS,EAAC,UAAU,CAAC,EAAC;SAC3C,CAAC;IAGF,CAAC;IACH,cAAC;AAAD,CAAC;AATY,OAAO;IAJnB,wEAAS,CAAC;QACT,QAAQ,EAAE,UAAU;OACG;KACxB,CAAC;YAQyC;AAE1C;SATY,OAAO,e","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { MapPage } from './map';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MapPage,\r\n  ],\r\n  imports: [\r\n    ComponentsModule,\r\n    IonicPageModule.forChild(MapPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    MapPage\r\n  ]\r\n})\r\nexport class MapPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.module.ts","import { NgModule } from '@angular/core';\r\nimport { IonicModule } from 'ionic-angular';\r\nimport { CustomNavbarComponent } from './custom-navbar/custom-navbar';\nimport { NavAccountComponent } from './nav-account/nav-account';\nimport { MapComponent } from './map/map';\r\n\r\n@NgModule({\r\n\tdeclarations: [\n\t\tCustomNavbarComponent,\n    NavAccountComponent,\n    MapComponent\r\n\t],\r\n\timports: [\r\n\t\tIonicModule\r\n\t],\r\n\texports: [\n\t\tCustomNavbarComponent,\n    NavAccountComponent,\n    MapComponent\r\n\t]\r\n})\r\nexport class ComponentsModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Component, Input } from '@angular/core';\r\nimport { ModalController } from 'ionic-angular';\r\nimport { RatingPage } from '../../pages/rating/rating';\r\n// import { CardsPage } from '../../pages/cards/cards';\r\n\r\n/**\r\n * Generated class for the NavAccountComponent component.\r\n *\r\n * See https://angular.io/api/core/Component for more info on Angular\r\n * Components.\r\n */\r\n@Component({\r\n  selector: 'custom-navbar',\r\n  templateUrl: 'custom-navbar.html'\r\n})\r\nexport class CustomNavbarComponent {\r\n\r\n  @Input() text: string;\r\n  @Input() type: number;\r\n\r\n  private LEFT_TEXT_RIGHT_ACCOUNT: number = 0;\r\n  private LEFT_LOGO_RIGHT_ACCOUNT: number = 1;\r\n  private CENTER_LOGO: number = 2;\r\n  private LEFT_TEXT_RIGHT_LOGO: number = 3;\r\n\r\n  constructor(public modalCtrl: ModalController) {\r\n  }\r\n\r\n  openPopUp(): void{\r\n    this.modalCtrl.create(RatingPage).present();\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/custom-navbar/custom-navbar.ts","import { Component, Input } from '@angular/core';\n\n/**\n * Generated class for the NavAccountComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n@Component({\n  selector: 'nav-account',\n  templateUrl: 'nav-account.html'\n})\nexport class NavAccountComponent {\n\n  credit: number = 200;\n  notificationCounter: number;\n\n  constructor() {\n  }\n\n  public onCreditChange(): void{\n    //Metodo richiamato ogni volta che il credito cambia\n  }\n\n  public onNotificationsNumberChange(): void{\n    //Metodo per la gestione del contatore notifiche\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/nav-account/nav-account.ts","import { Component, ElementRef, NgZone, ViewChild, Input } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\n\nimport { Coords } from '../../models';\nimport { ScriptLoaderProvider } from '../../providers/providers';\n\n/**\n * Generated class for the MapComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\ndeclare var google: any;\n\n@Component({\n  selector: 'map',\n  templateUrl: 'map.html'\n})\nexport class MapComponent{\n\n  @ViewChild('map')\n  private mapElement: ElementRef;\n  @Input() markers:{coords: Coords, marker?: any}[];\n  private map: any;\n  private userMarker: any;\n  private userPosition: Coords;\n\n  //Conf\n  private zoom: number = 13;\n  private maxZoom: number = 20;\n\n\n  constructor(\n  public zone: NgZone,\n  public platform: Platform,\n  private geolocation: Geolocation,\n  private scriptLoader: ScriptLoaderProvider\n) {\n    this.platform.ready().then(() =>\n      this.zone.run(()=>this.loadGoogleScript())\n    );\n  }\n\n  private loadGoogleScript(): void{\n    console.log('load Google maps script')\n    this.scriptLoader.loadGoogleMapsScript().subscribe(\n      (success) => {\n        this.loadMap();\n        console.log('loaded')\n      }\n    )\n  }\n\n  private loadMap(): void{\n\n   this.geolocation.getCurrentPosition(\n     {enableHighAccuracy: true, maximumAge: 2000, timeout: 6000}\n   )\n   .then((position) =>{\n       this.initializeMap(\n         this.userPosition = new Coords(\n           position.coords.latitude,\n           position.coords.longitude\n       ));\n     },\n     (error) => this.onErrorCords(error)\n   )\n }\n\n private onErrorCords(error): void{\n    console.log('on Error', error);\n  }\n\n  private initializeMap(coords: Coords): void {\n    this.zone.run(() => {\n      var mapEle = this.mapElement.nativeElement;\n      this.map = new google.maps.Map(mapEle, {\n        zoom: this.zoom,\n        maxZoom: this.maxZoom,\n        center: coords,\n        mapTypeId: google.maps.MapTypeId.ROADMAP,\n        disableDoubleClickZoom: false,\n        disableDefaultUI: true,\n        zoomControl: false,\n        draggable: true,\n        scrollwheel: true,\n        scaleControl: false,\n        keyboardShortcuts: false,\n      });\n\n      google.maps.event.addListenerOnce(this.map, 'idle', () => {\n        mapEle.classList.add('show-map');\n        google.maps.event.trigger(this.map, 'resize');\n\n        this.insertLocationButton();\n        this.addUserMarker();\n        this.loadMarkers();\n      });\n\n      google.maps.event.addListener(this.map, 'bounds_changed', () => {\n        this.zone.run(() => {\n          this.resizeMap();\n        });\n      });\n    });\n  }\n\n  private insertLocationButton(){\n    let controlDiv = document.createElement('div');\n    let controlUI = document.createElement('button');\n    controlUI.id = 'controlUI';\n    controlUI.setAttribute('ion-button', '');\n    controlUI.setAttribute('icon-only', '');\n    controlUI.setAttribute('class','button button-md button-default button-default-md');\n    controlDiv.appendChild(controlUI);\n\n    let controlText = document.createElement('ion-icon');\n    controlText.setAttribute('class','icon icon-md ion-md-locate');\n    controlUI.appendChild(controlText);\n\n    this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(controlDiv);\n    controlUI.addEventListener('click', () =>\n      this.map.panTo(this.userPosition)\n    );\n  }\n\n  public resizeMap(): void {\n    setTimeout(() => {\n      google.maps.event.trigger(this.map, 'resize');\n    }, 200);\n  }\n\n  private loadMarkers(){\n    this.markers.forEach(item =>{\n      item.marker = this.addMarker(item.coords);\n    })\n\n\n  }\n\n  private addUserMarker(){\n    if(!this.userMarker){\n      this.userMarker = this.addMarker(this.userPosition/*, CentralMapComponent.HUMAN*/);\n      this.userMarker.setZIndex(99999);\n      return;\n    }\n    this.resizeMap();\n  }\n\n  private addMarker(position: Coords, type?: number): any {\n    return new google.maps.Marker({\n      map: this.map,\n      position: position,\n      // icon: this.getIcon(type)\n    });\n  }\n\n  // private getIcon(type: number): any{\n  //   let img: string;\n  //   switch(type){\n  //     case CentralMapComponent.HUMAN: img = BASE64_IMG.HUMAN_IMG;\n  //     break;\n  //     case Place.BAR: img = BASE64_IMG.BAR_IMG;\n  //     break;\n  //     case Place.PIZZERIA: img = BASE64_IMG.PIZZERIA_IMG;\n  //     break;\n  //     case Place.RESTAURANT: img = BASE64_IMG.RESTAURANT_IMG;\n  //     break;\n  //   }\n  //   return img;\n  // }\n\n//   private async createInfoWindow(\n//     marker: any,\n//     place: Place,\n//     coords: Coords\n//   ){\n//     google.maps.event.addListener(marker, 'click', () =>{\n//       let modal = this.modalCtrl.create(\n//         PlaceDetailsPage,\n//         {\n//           place: place,\n//           coords: coords\n//         }\n//       );\n//       modal.present();\n//     })\n//   }\n// }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/map/map.ts","import { ScriptLoaderProvider } from './script-loader/script-loader';\r\n\r\nexport {\r\n    ScriptLoaderProvider\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/providers.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController } from 'ionic-angular';\r\n\r\nimport { Coords } from '../../models';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-map',\r\n  templateUrl: 'map.html'\r\n})\r\nexport class MapPage {\r\n  markers: any[] = [\r\n    {coords: new Coords(40.371002,18.1877503)},\r\n    {coords: new Coords(40.371102,18.1877503)},\r\n    {coords: new Coords(40.371002,18.1878503)},\r\n  ];\r\n\r\n  constructor(public navCtrl: NavController) {\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.ts"],"sourceRoot":""}